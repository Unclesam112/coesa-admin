import{_ as S,q as U,h as D,I as V,i as f,j as v,k as y,s as E,x as F,y as A,n as q,r as I,o as r,c as d,e as x,a as e,b as B,w as n,v as c,t as _,g as w,F as g,l as C,C as k,p as N,d as L}from"./index-67d284e1.js";const R=U(),M={components:{adminNavVue:D,Icon:V},props:{title:String},data(){return{editedItem:{title:"",description:"",about:"",thingsToExpect:[{id:Date.now(),value:""}],instructors:[{id:Date.now(),value:""}],date:"",time:"",category:"",duration:"",level:"",selectedFile:null,isUploading:!1,showAlmostThere:!1},categories:[],imageFile:null,imageUrl:"",characterCount:0,textareaCharacterCount:0}},mounted(){this.fetchCategories()},async created(){const s=this.$route.params.id;await this.fetchItemDetails(s)},methods:{updateCounter(){this.characterCount=this.editedItem.description.length},updateTextareaCounter(){this.textareaCharacterCount=this.editedItem.about.length},async fetchItemDetails(s){try{const u=(await f(v(y,"Courses"))).docs.find(m=>m.data().id===s);u?this.editedItem={...u.data()}:console.log("Item not found")}catch(o){console.error("Error fetching item details:",o)}},async fetchCategories(){try{const s=v(y,"/Courses/BNxBt2TPh4f2ytHMdbmf/Course-categories"),o=await f(s);this.categories=o.docs.map(u=>({id:u.id,name:u.data().name}))}catch(s){console.error("Error fetching categories:",s)}},async saveChanges(){try{const s=this.$route.params.id,o=v(y,"Courses"),m=(await f(o)).docs.find(i=>i.data().id===s);if(!m){console.log("Item not found");return}this.isUploading=!0,setTimeout(()=>{this.showAlmostThere=!0},1e4);const a={...this.editedItem};if(this.imageFile){const i=E(R,`images/${m.ref.id}`),b=await F(i,this.imageFile);this.imageUrl=await A(b.ref),a.imageUrl=this.imageUrl}await q(m.ref,a),this.$router.replace({params:{id:this.editedItem.title}}),this.isUploading=!1,console.log("Item updated successfully"),this.$router.push("/all-course")}catch(s){console.error("Error updating item:",s)}},async handleImageChange(s){this.imageFile=s.target.files[0]},addThing(){this.thingsToExpect.push({id:Date.now(),value:""})},removeThing(s){this.thingsToExpect.splice(s,1)},addCourseInstructor(){this.instructors.push({id:Date.now(),value:""})},removeCourseInstructor(s){this.instructors.splice(s,1)}},watch:{"$route.params.title":{immediate:!0,async handler(s){await this.fetchItemDetails(s)}}}},l=s=>(N("data-v-4b620d5a"),s=s(),L(),s),P={class:"container my-5"},j=l(()=>e("h2",null,"Edit Course",-1)),H={class:"row"},z={class:"col-lg-6 col-md-6"},G={class:"mb-3 mt-4"},J=l(()=>e("label",{for:"exampleInputName",class:"form-label"},"Add Course Image",-1)),K={class:"mb-3"},O=l(()=>e("label",{for:"exampleInputEmail1",class:"form-label"}," Course Title",-1)),Q={class:"mb-3"},W=l(()=>e("label",{for:"exampleFormControlTextarea1",class:"form-label"},"Course Description(briefly describe the course)",-1)),X={class:"mb-3"},Y=l(()=>e("label",{for:"exampleFormControlTextarea1",class:"form-label"},"About Course",-1)),Z={key:0,type:"submit",class:"btn btn-secondary"},$=l(()=>e("span",{class:"spinner-border spinner-border-sm text-white mx-2",role:"status"},null,-1)),ee={key:1,type:"submit",class:"btn btn-secondary"},te={class:"col-lg-6 col-md-6"},se={class:"mb-3"},oe=l(()=>e("label",{for:"things_to_expect"},"Things to Expect:",-1)),le=["onUpdate:modelValue"],ae=["onClick"],ie=l(()=>e("br",null,null,-1)),ne=l(()=>e("br",null,null,-1)),re={class:"mb-3"},de=l(()=>e("label",{for:"things_to_expect"},"Instructors",-1)),ce=["onUpdate:modelValue"],ue=["onClick"],me=l(()=>e("br",null,null,-1)),he=l(()=>e("br",null,null,-1)),pe={class:"row"},_e={class:"col-lg-6 col-md-6"},ge={class:"mb-3"},be=l(()=>e("label",{for:"datepicker",class:"form-label"},"Select Date:",-1)),fe={class:"col-lg-6 col-md-6"},ve={class:"mb-3"},ye=l(()=>e("label",{for:"timepicker",class:"form-label"},"Select Time:",-1)),Ce={class:"row"},Ie={class:"col-lg-4 col-md-6"},xe={class:"mb-3"},we=l(()=>e("label",{for:"datepicker",class:"form-label"},"Duration",-1)),ke={class:"col-lg-4 col-md-6"},Te={class:"mb-3"},Se=l(()=>e("label",{for:"timepicker",class:"form-label"},"Skill Level",-1)),Ue=l(()=>e("option",{value:"Beginner to Intermidiate",selected:""},"Beginner to Intermidiate",-1)),De=l(()=>e("option",{value:"Advanced Level"},"Advanced Level",-1)),Ve=[Ue,De],Ee={class:"col-lg-4 col-md-6"},Fe={class:"mb-3"},Ae=l(()=>e("label",{for:"categorySelect",class:"form-label"},"Select Category:",-1)),qe=l(()=>e("option",{value:""},"Select a category",-1)),Be=["value"];function Ne(s,o,u,m,a,i){const b=I("adminNavVue"),T=I("Icon");return r(),d(g,null,[x(b),e("div",P,[j,e("form",{onSubmit:o[12]||(o[12]=B((...t)=>i.saveChanges&&i.saveChanges(...t),["prevent"])),ref:"uploadForm"},[e("div",H,[e("div",z,[e("div",G,[J,e("input",{type:"file",onChange:o[0]||(o[0]=(...t)=>i.handleImageChange&&i.handleImageChange(...t)),class:"form-control",id:"image",ref:"fileInput"},null,544)]),e("div",K,[O,n(e("input",{type:"text",class:"form-control",id:"exampleInputEmail1","onUpdate:modelValue":o[1]||(o[1]=t=>a.editedItem.title=t)},null,512),[[c,a.editedItem.title]])]),e("div",Q,[W,n(e("textarea",{class:"form-control",id:"exampleFormControlTextarea1",rows:"3","onUpdate:modelValue":o[2]||(o[2]=t=>a.editedItem.description=t),maxlength:"300",onInput:o[3]||(o[3]=(...t)=>i.updateCounter&&i.updateCounter(...t))},null,544),[[c,a.editedItem.description]]),e("p",null,_(a.characterCount)+" / 300",1)]),e("div",X,[Y,n(e("textarea",{class:"form-control",id:"exampleFormControlTextarea1",rows:"3","onUpdate:modelValue":o[4]||(o[4]=t=>a.editedItem.about=t),maxlength:"600"},null,512),[[c,a.editedItem.about]]),e("p",null,_(a.textareaCharacterCount)+" / 600",1)]),s.isUploading?(r(),d("button",Z,[$,w(" "+_(s.showAlmostThere?"Almost there..":"Loading..."),1)])):(r(),d("button",ee,[w("Save "),x(T,{icon:"ci:save",color:"white"})]))]),e("div",te,[e("div",se,[oe,e("ul",null,[(r(!0),d(g,null,C(a.editedItem.thingsToExpect,(t,h)=>(r(),d("li",{key:h,class:"my-1"},[n(e("input",{type:"text","onUpdate:modelValue":p=>t.value=p,name:"things[]",required:""},null,8,le),[[c,t.value]]),e("button",{type:"button",onClick:p=>i.removeThing(h),class:"btn text-white",style:{background:"red"}},"Remove",8,ae)]))),128))]),e("button",{type:"button",onClick:o[5]||(o[5]=(...t)=>i.addThing&&i.addThing(...t)),class:"btn btn-primary"},"Add Item"),ie,ne]),e("div",re,[de,e("ul",null,[(r(!0),d(g,null,C(a.editedItem.instructors,(t,h)=>(r(),d("li",{key:h,class:"my-1"},[n(e("input",{type:"text","onUpdate:modelValue":p=>t.value=p,name:"things[]",required:""},null,8,ce),[[c,t.value]]),e("button",{type:"button",onClick:p=>i.removeCourseInstructor(h),class:"btn text-white",style:{background:"red"}},"Remove",8,ue)]))),128))]),e("button",{type:"button",onClick:o[6]||(o[6]=(...t)=>i.addCourseInstructor&&i.addCourseInstructor(...t)),class:"btn btn-primary"},"Add Item"),me,he]),e("div",pe,[e("div",_e,[e("div",ge,[be,n(e("input",{type:"date",class:"form-control",id:"datepicker","onUpdate:modelValue":o[7]||(o[7]=t=>a.editedItem.date=t)},null,512),[[c,a.editedItem.date]])])]),e("div",fe,[e("div",ve,[ye,n(e("input",{type:"time",class:"form-control",id:"timepicker","onUpdate:modelValue":o[8]||(o[8]=t=>a.editedItem.time=t)},null,512),[[c,a.editedItem.time]])])])]),e("div",Ce,[e("div",Ie,[e("div",xe,[we,n(e("input",{type:"text",class:"form-control",id:"","onUpdate:modelValue":o[9]||(o[9]=t=>s.duration=t)},null,512),[[c,s.duration]])])]),e("div",ke,[e("div",Te,[Se,n(e("select",{class:"form-select form-select-sm bg-dark text-white","aria-label":"Small select example","onUpdate:modelValue":o[10]||(o[10]=t=>s.level=t)},Ve,512),[[k,s.level]]),e("p",null,_(s.level),1)])]),e("div",Ee,[e("div",Fe,[e("div",null,[Ae,n(e("select",{"onUpdate:modelValue":o[11]||(o[11]=t=>s.category=t),class:"form-select form-select-sm bg-dark text-white","aria-label":"Small select example"},[qe,(r(!0),d(g,null,C(a.categories,t=>(r(),d("option",{key:t.id,value:t.id},_(t.name),9,Be))),128))],512),[[k,s.category]])])])])])])])],544)])],64)}const Re=S(M,[["render",Ne],["__scopeId","data-v-4b620d5a"]]);export{Re as default};
