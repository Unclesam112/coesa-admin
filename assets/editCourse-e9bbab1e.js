import{_ as k,q as U,h as D,I as S,i as f,j as I,k as v,s as V,x as F,y as E,n as A,r as C,o as i,c as r,e as y,a as e,b as q,w as d,v as c,t as g,g as x,F as b,l as w,p as N,d as R}from"./index-f50fb127.js";const B=U(),L={components:{adminNavVue:D,Icon:S},props:{title:String},data(){return{editedItem:{title:"",description:"",about:"",thingsToExpect:[{id:Date.now(),value:""}],instructors:[{id:Date.now(),value:""}],date:"",time:"",selectedFile:null,isUploading:!1,showAlmostThere:!1},imageFile:null,imageUrl:"",characterCount:0,textareaCharacterCount:0}},async created(){const o=this.$route.params.id;await this.fetchItemDetails(o)},methods:{updateCounter(){this.characterCount=this.editedItem.description.length},updateTextareaCounter(){this.textareaCharacterCount=this.editedItem.about.length},async fetchItemDetails(o){try{const p=(await f(I(v,"Courses"))).docs.find(u=>u.data().id===o);p?this.editedItem={...p.data()}:console.log("Item not found")}catch(t){console.error("Error fetching item details:",t)}},async saveChanges(){try{const o=this.$route.params.id,t=I(v,"Courses"),u=(await f(t)).docs.find(a=>a.data().id===o);if(!u){console.log("Item not found");return}this.isUploading=!0,setTimeout(()=>{this.showAlmostThere=!0},1e4);const l={...this.editedItem};if(this.imageFile){const a=V(B,`images/${u.ref.id}`),_=await F(a,this.imageFile);this.imageUrl=await E(_.ref),l.imageUrl=this.imageUrl}await A(u.ref,l),this.$router.replace({params:{id:this.editedItem.title}}),this.isUploading=!1,console.log("Item updated successfully"),this.$router.push("/all-course")}catch(o){console.error("Error updating item:",o)}},async handleImageChange(o){this.imageFile=o.target.files[0]},addThing(){this.thingsToExpect.push({id:Date.now(),value:""})},removeThing(o){this.thingsToExpect.splice(o,1)},addCourseInstructor(){this.instructors.push({id:Date.now(),value:""})},removeCourseInstructor(o){this.instructors.splice(o,1)}},watch:{"$route.params.title":{immediate:!0,async handler(o){await this.fetchItemDetails(o)}}}},n=o=>(N("data-v-381564d9"),o=o(),R(),o),M={class:"container my-5"},P=n(()=>e("h2",null,"Edit Course",-1)),j={class:"row"},z={class:"col-lg-6 col-md-6"},G={class:"mb-3 mt-4"},H=n(()=>e("label",{for:"exampleInputName",class:"form-label"},"Add Course Image",-1)),J={class:"mb-3"},K=n(()=>e("label",{for:"exampleInputEmail1",class:"form-label"}," Course Title",-1)),O={class:"mb-3"},Q=n(()=>e("label",{for:"exampleFormControlTextarea1",class:"form-label"},"Course Description(briefly describe the course)",-1)),W={class:"mb-3"},X=n(()=>e("label",{for:"exampleFormControlTextarea1",class:"form-label"},"About Course",-1)),Y={key:0,type:"submit",class:"btn btn-secondary"},Z=n(()=>e("span",{class:"spinner-border spinner-border-sm text-white mx-2",role:"status"},null,-1)),$={key:1,type:"submit",class:"btn btn-secondary"},ee={class:"col-lg-6 col-md-6"},te={class:"mb-3"},se=n(()=>e("label",{for:"things_to_expect"},"Things to Expect:",-1)),oe=["onUpdate:modelValue"],le=["onClick"],ae=n(()=>e("br",null,null,-1)),ne=n(()=>e("br",null,null,-1)),ie={class:"mb-3"},re=n(()=>e("label",{for:"things_to_expect"},"Instructors",-1)),de=["onUpdate:modelValue"],ce=["onClick"],ue=n(()=>e("br",null,null,-1)),me=n(()=>e("br",null,null,-1)),he={class:"row"},pe={class:"col-lg-6 col-md-6"},_e={class:"mb-3"},ge=n(()=>e("label",{for:"datepicker",class:"form-label"},"Select Date:",-1)),be={class:"col-lg-6 col-md-6"},fe={class:"mb-3"},Ie=n(()=>e("label",{for:"timepicker",class:"form-label"},"Select Time:",-1));function ve(o,t,p,u,l,a){const _=C("adminNavVue"),T=C("Icon");return i(),r(b,null,[y(_),e("div",M,[P,e("form",{onSubmit:t[9]||(t[9]=q((...s)=>a.saveChanges&&a.saveChanges(...s),["prevent"])),ref:"uploadForm"},[e("div",j,[e("div",z,[e("div",G,[H,e("input",{type:"file",onChange:t[0]||(t[0]=(...s)=>a.handleImageChange&&a.handleImageChange(...s)),class:"form-control",id:"image",ref:"fileInput"},null,544)]),e("div",J,[K,d(e("input",{type:"text",class:"form-control",id:"exampleInputEmail1","onUpdate:modelValue":t[1]||(t[1]=s=>l.editedItem.title=s)},null,512),[[c,l.editedItem.title]])]),e("div",O,[Q,d(e("textarea",{class:"form-control",id:"exampleFormControlTextarea1",rows:"3","onUpdate:modelValue":t[2]||(t[2]=s=>l.editedItem.description=s),maxlength:"300",onInput:t[3]||(t[3]=(...s)=>a.updateCounter&&a.updateCounter(...s))},null,544),[[c,l.editedItem.description]]),e("p",null,g(l.characterCount)+" / 300",1)]),e("div",W,[X,d(e("textarea",{class:"form-control",id:"exampleFormControlTextarea1",rows:"3","onUpdate:modelValue":t[4]||(t[4]=s=>l.editedItem.about=s),maxlength:"600"},null,512),[[c,l.editedItem.about]]),e("p",null,g(l.textareaCharacterCount)+" / 600",1)]),o.isUploading?(i(),r("button",Y,[Z,x(" "+g(o.showAlmostThere?"Almost there..":"Loading..."),1)])):(i(),r("button",$,[x("Save "),y(T,{icon:"ci:save",color:"white"})]))]),e("div",ee,[e("div",te,[se,e("ul",null,[(i(!0),r(b,null,w(l.editedItem.thingsToExpect,(s,m)=>(i(),r("li",{key:m,class:"my-1"},[d(e("input",{type:"text","onUpdate:modelValue":h=>s.value=h,name:"things[]",required:""},null,8,oe),[[c,s.value]]),e("button",{type:"button",onClick:h=>a.removeThing(m),class:"btn text-white",style:{background:"red"}},"Remove",8,le)]))),128))]),e("button",{type:"button",onClick:t[5]||(t[5]=(...s)=>a.addThing&&a.addThing(...s)),class:"btn btn-primary"},"Add Item"),ae,ne]),e("div",ie,[re,e("ul",null,[(i(!0),r(b,null,w(l.editedItem.instructors,(s,m)=>(i(),r("li",{key:m,class:"my-1"},[d(e("input",{type:"text","onUpdate:modelValue":h=>s.value=h,name:"things[]",required:""},null,8,de),[[c,s.value]]),e("button",{type:"button",onClick:h=>a.removeCourseInstructor(m),class:"btn text-white",style:{background:"red"}},"Remove",8,ce)]))),128))]),e("button",{type:"button",onClick:t[6]||(t[6]=(...s)=>a.addCourseInstructor&&a.addCourseInstructor(...s)),class:"btn btn-primary"},"Add Item"),ue,me]),e("div",he,[e("div",pe,[e("div",_e,[ge,d(e("input",{type:"date",class:"form-control",id:"datepicker","onUpdate:modelValue":t[7]||(t[7]=s=>l.editedItem.date=s)},null,512),[[c,l.editedItem.date]])])]),e("div",be,[e("div",fe,[Ie,d(e("input",{type:"time",class:"form-control",id:"timepicker","onUpdate:modelValue":t[8]||(t[8]=s=>l.editedItem.time=s)},null,512),[[c,l.editedItem.time]])])])])])])],544)])],64)}const ye=k(L,[["render",ve],["__scopeId","data-v-381564d9"]]);export{ye as default};
