import{_ as U,m as D,h as S,I as V,i as f,j as I,k as v,A as C,n as F,q as E,s as A,r as y,o as r,c as d,e as x,a as e,b as q,w as c,v as u,t as g,g as w,F as b,l as T,p as N,d as R}from"./index-fda25ced.js";const B=D(),L={components:{adminNavVue:S,Icon:V},props:{title:String},data(){return{editedItem:{title:"",description:"",about:"",thingsToExpect:[{id:Date.now(),value:""}],instructors:[{id:Date.now(),value:""}],date:"",time:"",selectedFile:null,isUploading:!1,showAlmostThere:!1},imageFile:null,imageUrl:"",characterCount:0,textareaCharacterCount:0}},async created(){const o=this.$route.params.id;await this.fetchItemDetails(o)},methods:{updateCounter(){this.characterCount=this.editedItem.description.length},updateTextareaCounter(){this.textareaCharacterCount=this.editedItem.about.length},async fetchItemDetails(o){try{const p=(await f(I(v,"Courses"))).docs.find(i=>i.data().id===o);p?this.editedItem={...p.data()}:console.log("Item not found")}catch(t){console.error("Error fetching item details:",t)}},async saveChanges(){try{const o=this.$route.params.id,t=I(v,"Courses"),i=(await f(t)).docs.find(l=>l.data().id===o);if(!i){console.log("Item not found");return}this.isUploading=!0,setTimeout(()=>{this.showAlmostThere=!0},1e4);const a={...this.editedItem};if(await C(i.ref,a),this.imageFile){const l=F(B,`images/${i.ref.id}`),_=await E(l,this.imageFile);this.imageUrl=await A(_.ref),await C(i.ref,{imageUrl:this.imageUrl})}this.$router.replace({params:{id:this.editedItem.title}}),this.isUploading=!1,console.log("Item updated successfully"),this.$router.push("/all-course")}catch(o){console.error("Error updating item:",o)}},async handleImageChange(o){this.imageFile=o.target.files[0]},addThing(){this.thingsToExpect.push({id:Date.now(),value:""})},removeThing(o){this.thingsToExpect.splice(o,1)},addCourseInstructor(){this.instructors.push({id:Date.now(),value:""})},removeCourseInstructor(o){this.instructors.splice(o,1)}},watch:{"$route.params.title":{immediate:!0,async handler(o){await this.fetchItemDetails(o)}}}},n=o=>(N("data-v-e401b9c2"),o=o(),R(),o),M={class:"container my-5"},P=n(()=>e("h2",null,"Edit Course",-1)),j={class:"row"},z={class:"col-lg-6 col-md-6"},G={class:"mb-3 mt-4"},H=n(()=>e("label",{for:"exampleInputName",class:"form-label"},"Add Course Image",-1)),J={class:"mb-3"},K=n(()=>e("label",{for:"exampleInputEmail1",class:"form-label"}," Course Title",-1)),O={class:"mb-3"},Q=n(()=>e("label",{for:"exampleFormControlTextarea1",class:"form-label"},"Course Description(briefly describe the course)",-1)),W={class:"mb-3"},X=n(()=>e("label",{for:"exampleFormControlTextarea1",class:"form-label"},"About Course",-1)),Y={key:0,type:"submit",class:"btn btn-secondary"},Z=n(()=>e("span",{class:"spinner-border spinner-border-sm text-white mx-2",role:"status"},null,-1)),$={key:1,type:"submit",class:"btn btn-secondary"},ee={class:"col-lg-6 col-md-6"},te={class:"mb-3"},se=n(()=>e("label",{for:"things_to_expect"},"Things to Expect:",-1)),oe=["onUpdate:modelValue"],ae=["onClick"],le=n(()=>e("br",null,null,-1)),ne=n(()=>e("br",null,null,-1)),ie={class:"mb-3"},re=n(()=>e("label",{for:"things_to_expect"},"Instructors",-1)),de=["onUpdate:modelValue"],ce=["onClick"],ue=n(()=>e("br",null,null,-1)),me=n(()=>e("br",null,null,-1)),he={class:"row"},pe={class:"col-lg-6 col-md-6"},_e={class:"mb-3"},ge=n(()=>e("label",{for:"datepicker",class:"form-label"},"Select Date:",-1)),be={class:"col-lg-6 col-md-6"},fe={class:"mb-3"},Ie=n(()=>e("label",{for:"timepicker",class:"form-label"},"Select Time:",-1));function ve(o,t,p,i,a,l){const _=y("adminNavVue"),k=y("Icon");return r(),d(b,null,[x(_),e("div",M,[P,e("form",{onSubmit:t[9]||(t[9]=q((...s)=>l.saveChanges&&l.saveChanges(...s),["prevent"])),ref:"uploadForm"},[e("div",j,[e("div",z,[e("div",G,[H,e("input",{type:"file",onChange:t[0]||(t[0]=(...s)=>l.handleImageChange&&l.handleImageChange(...s)),class:"form-control",id:"image",ref:"fileInput",required:""},null,544)]),e("div",J,[K,c(e("input",{type:"text",class:"form-control",id:"exampleInputEmail1","onUpdate:modelValue":t[1]||(t[1]=s=>a.editedItem.title=s)},null,512),[[u,a.editedItem.title]])]),e("div",O,[Q,c(e("textarea",{class:"form-control",id:"exampleFormControlTextarea1",rows:"3","onUpdate:modelValue":t[2]||(t[2]=s=>a.editedItem.description=s),maxlength:"300",onInput:t[3]||(t[3]=(...s)=>l.updateCounter&&l.updateCounter(...s))},null,544),[[u,a.editedItem.description]]),e("p",null,g(a.characterCount)+" / 300",1)]),e("div",W,[X,c(e("textarea",{class:"form-control",id:"exampleFormControlTextarea1",rows:"3","onUpdate:modelValue":t[4]||(t[4]=s=>a.editedItem.about=s),maxlength:"600"},null,512),[[u,a.editedItem.about]]),e("p",null,g(a.textareaCharacterCount)+" / 600",1)]),o.isUploading?(r(),d("button",Y,[Z,w(" "+g(o.showAlmostThere?"Almost there..":"Loading..."),1)])):(r(),d("button",$,[w("Save "),x(k,{icon:"ci:save",color:"white"})]))]),e("div",ee,[e("div",te,[se,e("ul",null,[(r(!0),d(b,null,T(a.editedItem.thingsToExpect,(s,m)=>(r(),d("li",{key:m,class:"my-1"},[c(e("input",{type:"text","onUpdate:modelValue":h=>s.value=h,name:"things[]",required:""},null,8,oe),[[u,s.value]]),e("button",{type:"button",onClick:h=>l.removeThing(m),class:"btn text-white",style:{background:"red"}},"Remove",8,ae)]))),128))]),e("button",{type:"button",onClick:t[5]||(t[5]=(...s)=>l.addThing&&l.addThing(...s)),class:"btn btn-primary"},"Add Item"),le,ne]),e("div",ie,[re,e("ul",null,[(r(!0),d(b,null,T(a.editedItem.instructors,(s,m)=>(r(),d("li",{key:m,class:"my-1"},[c(e("input",{type:"text","onUpdate:modelValue":h=>s.value=h,name:"things[]",required:""},null,8,de),[[u,s.value]]),e("button",{type:"button",onClick:h=>l.removeCourseInstructor(m),class:"btn text-white",style:{background:"red"}},"Remove",8,ce)]))),128))]),e("button",{type:"button",onClick:t[6]||(t[6]=(...s)=>l.addCourseInstructor&&l.addCourseInstructor(...s)),class:"btn btn-primary"},"Add Item"),ue,me]),e("div",he,[e("div",pe,[e("div",_e,[ge,c(e("input",{type:"date",class:"form-control",id:"datepicker","onUpdate:modelValue":t[7]||(t[7]=s=>a.editedItem.date=s)},null,512),[[u,a.editedItem.date]])])]),e("div",be,[e("div",fe,[Ie,c(e("input",{type:"time",class:"form-control",id:"timepicker","onUpdate:modelValue":t[8]||(t[8]=s=>a.editedItem.time=s)},null,512),[[u,a.editedItem.time]])])])])])])],544)])],64)}const ye=U(L,[["render",ve],["__scopeId","data-v-e401b9c2"]]);export{ye as default};
